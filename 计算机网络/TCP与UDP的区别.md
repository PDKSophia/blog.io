## TCP 和 UDP 的区别

|            |      TCP       |    UDP     |
| :--------: | :------------: | :--------: |
|  是否连接  |    面向连接    | 面向非连接 |
| 传输可靠性 |     可靠的     |  不可靠的  |
|  应用场合  | 传输大量的数据 |  少量数据  |
|    速度    |       慢       |     快     |

OSI 和 TCP/IP 模型在传输层定义两种传输协议：TCP（或传输控制协议）和 UDP（或用户数据报协议）。

### UDP

UDP 与 TCP 的主要区别在于 UDP 不一定提供可靠的数据传输。事实上，**该协议不能保证数据准确无误地到达目的地**。UDP 在许多方面非常有效。当某个程序的目标是尽快地传输尽可能多的信息时（其中任意给定数据的重要性相对较低），可使用 UDP。

> ICQ 短消息使用 UDP 协议发送消息。

许多程序将使用单独的 TCP 连接和单独的 UDP 连接。重要的状态信息随可靠的 TCP 连接发送，而主数据流通过 UDP 发送。

### TCP

TCP 的目的是提供可靠的数据传输，并在相互进行通信的设备或服务之间保持一个虚拟连接。TCP 在数据包接收无序、丢失或在交付期间被破坏时，负责数据恢复。它通过为其发送的每个数据包提供一个序号来完成此恢复。记住，较低的网络层会将每个数据包视为一个独立的单元，因此，数据包可以沿完全不同的路径发送，即使它们都是同一消息的组成部分。这种路由与网络层处理分段和重新组装数据包的方式非常相似，只是级别更高而已。

为确保正确地接收数据，TCP 要求在目标计算机成功收到数据时发回一个确认（即 ACK）。如果在某个时限内未收到相应的 ACK，将重新传送数据包。如果网络拥塞，这种重新传送将导致发送的数据包重复。但是，接收计算机可使用数据包的序号来确定它是否为重复数据包，并在必要时丢弃它。

### TCP 与 UDP 的选择

如果比较 UDP 包和 TCP 包的结构，很明显 UDP 包不具备 TCP 包复杂的可靠性与控制机制。与 TCP 协议相同，UDP 的源端口数和目的端口数也都支持一台主机上的多个应用。一个 16 位的 UDP 包包含了一个字节长的头部和数据的长度，校验码域使其可以进行整体校验。（许多应用只支持 UDP，如：多媒体数据流，不产生任何额外的数据，即使知道有破坏的包也不进行重发。）

很明显，当数据传输的性能必须让位于数据传输的完整性、可控制性和可靠性时，TCP 协议是当然的选择。当强调传输性能而不是传输的完整性时，如：音频和多媒体应用，UDP 是最好的选择。在数据传输时间很短，以至于此前的连接过程成为整个流量主体的情况下，UDP 也是一个好的选择，如：DNS 交换。把 SNMP 建立在 UDP 上的部分原因是设计者认为当发生网络阻塞时，UDP 较低的开销使其有更好的机会去传送管理数据。TCP 丰富的功能有时会导致不可预料的性能低下，但是我们相信在不远的将来，TCP 可靠的点对点连接将会用于绝大多数的网络应用。

TCP 协议和 UDP 协议特性区别总结：

- TCP 协议在传送数据段的时候要给段标号，UDP 协议不需要
- TCP 协议可靠；UDP 协议不可靠
- TCP 协议是面向连接；UDP 协议采用无连接
- TCP 协议负载较高，采用虚电路；UDP 采用无连接
- TCP 协议的发送方要确认接收方是否收到数据段（3 次握手协议）
- TCP 协议采用窗口技术和流控制
